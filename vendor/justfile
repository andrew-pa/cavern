
make_bin := `which make`
target_prefix := "aarch64-linux-gnu-"
output_dir := absolute_path("./.build")

# Choose a task to run.
default:
    @just --choose

# Delete all built vendor artifacts.
clean:
    rm -rf {{output_dir}}

# Build U-Boot image and tools.
build_u-boot:
    mkdir -p {{output_dir / "u-boot"}}
    CROSS_COMPILE={{target_prefix}} {{make_bin}} -C ./u-boot O={{output_dir / "u-boot"}} qemu_arm64_defconfig
    CROSS_COMPILE={{target_prefix}} {{make_bin}} -C ./u-boot O={{output_dir / "u-boot"}} -j all
